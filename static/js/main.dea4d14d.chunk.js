(this["webpackJsonpweb-social-ts"]=this["webpackJsonpweb-social-ts"]||[]).push([[0],{158:function(e,t,a){e.exports={avatar:"ProfileInfo_avatar__38kak",container:"ProfileInfo_container__11Am1"}},164:function(e,t,a){e.exports={navLinkStyle:"DialogItem_navLinkStyle__2vftY"}},178:function(e,t,a){e.exports=a(312)},183:function(e,t,a){},211:function(e,t,a){},312:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(40),l=a.n(i),o=(a(183),a(23)),s=a(21),u=a(16),m=a(51),d=a.n(m),E=a(366),f=a(367),b=a(370),p=a(360),g=a(368),O=a(371),h=function(e){var t=e.followUserCallBack,a=e.unfollowUserCallBack,n=Object(u.c)((function(e){return e.usersPage.users})),r=Object(u.c)((function(e){return e.usersPage.followInProgress})),i=n.map((function(e){var n=e.followed?c.a.createElement(E.a,{disabled:r.some((function(t){return t===e.id})),onClick:function(){return a(e.id)},size:"small",variant:"contained"},"Unfollow"):c.a.createElement(E.a,{disabled:r.some((function(t){return t===e.id})),onClick:function(){return t(e.id)},size:"small",variant:"contained"},"follow");return c.a.createElement(f.a,{item:!0,xs:8,key:e.id},c.a.createElement(b.a,{elevation:3,sx:{p:2,maxWidth:400,flexGrow:1,mt:2}},c.a.createElement(f.a,{container:!0,spacing:3},c.a.createElement(f.a,{item:!0},c.a.createElement(p.a,{sx:{width:80,height:80,position:"relative",top:10}},c.a.createElement(o.b,{to:"/profile/".concat(e.id)},c.a.createElement(g.a,{alt:e.name?e.name:void 0,src:e.photos.small?e.photos.small:d.a,sx:{width:80,height:80}})))),c.a.createElement(f.a,{item:!0,xs:12,sm:!0,container:!0},c.a.createElement(f.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},c.a.createElement(f.a,{item:!0,xs:!0},c.a.createElement(O.a,{gutterBottom:!0,variant:"subtitle1",component:"div",sx:{fontSize:"1.3rem"}},e.name),c.a.createElement(O.a,{variant:"body2"},e.status)),c.a.createElement(f.a,{item:!0},n))))))}));return c.a.createElement(c.a.Fragment,null,i)},v=a(13),S=a(15),x=a(157),j=a.n(x).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"099be23b-024b-4d04-8aea-ded1a22de046"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(n||(n={}));var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return j.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},C=function(e){return j.post("follow/".concat(e)).then((function(e){return e.data}))},P=function(e){return j.delete("follow/".concat(e)).then((function(e){return e.data}))},T=function(e){return j.get("profile/".concat(e)).then((function(e){return e.data}))},y=function(e){return j.get("profile/status/".concat(e))},N=function(e){return j.put("profile/status",{status:e})},U=function(){return j.get("auth/me").then((function(e){return e.data}))},k=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return j.post("auth/login",{email:e,password:t,rememberMe:a}).then((function(e){return e.data}))},I=function(){return j.delete("auth/login")},R={users:[],totalUsersCount:0,pageSize:10,currentPage:1,isFetching:!1,followInProgress:[]},L=function(e){return{type:"SET-IS-FETCHING",isFetching:e}},A=function(e){return{type:"SET-FOLLOW-PROGRESS-START",id:e}},F=function(e){return{type:"SET-FOLLOW-PROGRESS-END",id:e}},D=a(14),_=a(361),z=function(e){var t=e.totalUsersCount,a=e.pageSize,n=e.currentPage,i=e.setCurrentPage,l=Object(r.useState)(n),o=Object(D.a)(l,2),s=o[0],u=o[1],m=Math.ceil(t/a);return c.a.createElement(_.a,{count:m,variant:"outlined",color:"secondary",page:s,onChange:function(e,t){u(t),i(t)}})},G=(a(211),function(){return c.a.createElement("div",{className:"middle"},c.a.createElement("div",{className:"bar bar1"}),c.a.createElement("div",{className:"bar bar2"}),c.a.createElement("div",{className:"bar bar3"}),c.a.createElement("div",{className:"bar bar4"}),c.a.createElement("div",{className:"bar bar5"}),c.a.createElement("div",{className:"bar bar6"}),c.a.createElement("div",{className:"bar bar7"}),c.a.createElement("div",{className:"bar bar8"}))}),W=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.usersPage.isFetching})),a=Object(u.c)((function(e){return e.usersPage.totalUsersCount})),i=Object(u.c)((function(e){return e.usersPage.pageSize})),l=Object(u.c)((function(e){return e.usersPage.currentPage}));Object(r.useEffect)((function(){e(function(e,t){return function(a){a(L(!0)),w(e,t).then((function(e){a({type:"SET-USERS",users:e.items}),a({type:"SET-TOTAL-USERS-COUNT",totalUsersCount:e.totalCount}),a(L(!1))}))}}(l,i))}),[l]);return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(G,null),c.a.createElement(z,{totalUsersCount:a,pageSize:i,currentPage:l,setCurrentPage:function(t){e(function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}}(t))}}),c.a.createElement(f.a,{container:!0,spacing:2,columns:16},c.a.createElement(h,{followUserCallBack:function(t){e(function(e){return function(t){t(A(e)),C(e).then((function(a){a.resultCode===n.Success&&t(function(e){return{type:"FOLLOW",id:e}}(e)),t(F(e))}))}}(t))},unfollowUserCallBack:function(t){e(function(e){return function(t){t(A(e)),P(e).then((function(a){a.resultCode===n.Success&&t(function(e){return{type:"UNFOLLOW",id:e}}(e)),t(F(e))}))}}(t))}})))},B=a(158),M=a.n(B),H=a(363),V={user:{},status:"",postsData:[{id:Object(H.a)(),message:"Hello, Boy",likeCount:10},{id:Object(H.a)(),message:"Boy",likeCount:33},{id:Object(H.a)(),message:"Sup",likeCount:21}]},q=function(e){return{type:"SET-USER-STATUS",status:e}},J=function(e){return function(t){T(e).then((function(e){t({type:"SET-USER-TO-PROFILE-PAGE",user:e})}))}},Y=function(e){return function(t){return y(e).then((function(e){200===e.status&&t(q(e.data))}))}},K=function(e){return function(t){N(e).then((function(a){200===a.status&&t(q(e))}))}},X=a(358),Q=Object(r.memo)((function(e){var t=e.user,a=e.mainUserId,n=Object(u.b)(),i=Object(u.c)((function(e){return e.profilePage.status})),l=Object(r.useState)(i),o=Object(D.a)(l,2),s=o[0],m=o[1],E=Object(r.useState)(!1),b=Object(D.a)(E,2),p=b[0],h=b[1];return c.a.createElement(f.a,{container:!0,sx:{border:"1px solid black",mb:"40px"}},c.a.createElement(f.a,{item:!0},c.a.createElement(g.a,{className:M.a.avatar,src:t.photos&&t.photos.small?t.photos.small:d.a,alt:t.fullName,sx:{width:"150px",height:"150px"}})),c.a.createElement(f.a,{item:!0,sx:{ml:"20px"}},c.a.createElement(O.a,{sx:{fontSize:"2.2rem",fontWeight:"300"}},t.fullName),c.a.createElement(f.a,{container:!0},p?c.a.createElement(X.a,{autoFocus:!0,size:"small",variant:"outlined",onKeyPress:function(e){13===e.charCode&&(h(!1),n(K(s)))},onChange:function(e){m(e.currentTarget.value)},onBlur:function(){h(!1),n(K(s))}}):c.a.createElement(O.a,{onDoubleClick:function(){a===t.userId&&h(!0)},sx:{fontSize:"1.2rem"}},i))))})),Z=a(362),$=a(353),ee=a(354),te=function(e){return c.a.createElement(b.a,{elevation:3,sx:{mt:"10px"}},c.a.createElement(f.a,{container:!0,sx:{padding:"15px",width:"500px"}},c.a.createElement(f.a,{item:!0},c.a.createElement(g.a,{src:d.a,alt:"avatar",sx:{height:"60px",width:"60px"}})),c.a.createElement(f.a,{item:!0},c.a.createElement(O.a,{variant:"body1",sx:{ml:"15px"}},"NAME"),c.a.createElement(O.a,{variant:"body1",sx:{ml:"15px"}},e.message)),c.a.createElement(f.a,{container:!0,sx:{position:"relative",left:"-15px",top:"18px"}},c.a.createElement(Z.a,{icon:c.a.createElement($.a,null),checkedIcon:c.a.createElement(ee.a,null),sx:{color:"gray","&.Mui-checked":{color:"red"}}}),c.a.createElement(O.a,{sx:{position:"relative",left:"-8px",top:"8px"}},e.likeCount))))},ae=a(64),ne=a(44),re=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.profilePage.postsData})),a=Object(ae.a)({initialValues:{newPost:""},validationSchema:ne.a({newPost:ne.b().max(5,"Max chars 5")}),onSubmit:function(t){var a;(a=t.newPost).trim()&&e({type:"ADD-NEW-POST",text:a.trim()})}}),n=t.map((function(e){return c.a.createElement(te,{key:e.id,message:e.message,likeCount:e.likeCount})}));return c.a.createElement(f.a,{container:!0},c.a.createElement(f.a,{item:!0},c.a.createElement("form",{onSubmit:a.handleSubmit},c.a.createElement(X.a,{name:"newPost",error:!!a.errors.newPost,helperText:!!a.errors.newPost&&a.errors.newPost,multiline:!0,rows:4,onChange:a.handleChange,value:a.values.newPost}),c.a.createElement(E.a,{type:"submit",variant:"contained"},"Send"))),c.a.createElement(f.a,{container:!0},c.a.createElement(f.a,{item:!0},n)))};function ce(e){return function(t){return Object(u.c)((function(e){return e.authUser.isAuth}))?c.a.createElement(e,t):c.a.createElement(s.a,{to:"/login"})}}var ie=a(59),le=Object(r.memo)((function(e){var t=Object(u.c)((function(e){return e.authUser.id})),a=Object(u.c)((function(e){return e.profilePage.user})),n=Object(u.b)(),i=Number(e.match.params.userId);return Object(r.useEffect)((function(){i?(n(J(i)),n(Y(i))):t&&(n(J(t)),n(Y(t)))}),[i,t]),a?c.a.createElement(b.a,null,c.a.createElement(f.a,{container:!0,sx:{padding:"20px"}},c.a.createElement(Q,{user:a,mainUserId:t}),c.a.createElement(re,null))):c.a.createElement(G,null)})),oe=Object(ie.compose)(ce,s.f)(le),se=a(377),ue=a(164),me=a.n(ue),de=function(e){return c.a.createElement(b.a,{sx:{minWidth:"200px",mb:"15px"},elevation:3},c.a.createElement(f.a,{container:!0,sx:{padding:"10px"},spacing:1},c.a.createElement(f.a,{item:!0},c.a.createElement(g.a,{alt:e.name,src:d.a})),c.a.createElement(f.a,{item:!0},c.a.createElement(o.b,{className:me.a.navLinkStyle,to:"/dialogs/".concat(e.id)},e.name))))},Ee={messages:[{id:Object(H.a)(),message:"Hi, bro!"},{id:Object(H.a)(),message:"GL!"},{id:Object(H.a)(),message:"Bye;)"}],users:[{id:Object(H.a)(),name:"Leon"},{id:Object(H.a)(),name:"Alex"},{id:Object(H.a)(),name:"Bob"}]},fe=function(e){return c.a.createElement(f.a,{container:!0,sx:{mb:"7px",padding:"2px",maxWidth:"300px",wordWrap:"break-word"}},c.a.createElement(f.a,{item:!0},c.a.createElement(O.a,{variant:"body1",sx:{color:"white",backgroundColor:"#1976D2",padding:"7px",borderRadius:"5px"}},e.message)))},be=function(e){var t=e.send,a=Object(u.c)((function(e){return e.dialogsPage.messages})).map((function(e){return c.a.createElement(fe,{key:e.id,message:e.message})})),n=Object(ae.a)({initialValues:{message:""},validationSchema:ne.a({message:ne.b().max(10,"Max chars 10")}),onSubmit:function(e){t(e.message)}});return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{container:!0,sx:{padding:"20px",border:"2px solid gray",borderRadius:"5px",mb:"10px"}},a),c.a.createElement(f.a,{item:!0},c.a.createElement("form",{onSubmit:n.handleSubmit},c.a.createElement(X.a,{multiline:!0,name:"message",error:!!n.errors.message,helperText:!!n.errors.message&&n.errors.message,onChange:n.handleChange,rows:4,value:n.values.message}),c.a.createElement(E.a,{type:"submit",size:"small",variant:"contained"},"Send"))))},pe=ce((function(){var e=Object(u.c)((function(e){return e.dialogsPage.users})),t=Object(u.b)(),a=e.map((function(e){return c.a.createElement(de,{key:e.id,name:e.name,id:e.id})}));return c.a.createElement(f.a,{container:!0},c.a.createElement(f.a,{item:!0,sx:{margin:"8px 20px 0 10px"}},a),c.a.createElement(b.a,{elevation:3},c.a.createElement(f.a,{item:!0,sx:{width:"500px",padding:"20px"}},c.a.createElement(be,{send:function(e){t({type:"ADD-NEW-MESSAGE",text:e})}}))))})),ge={email:null,id:null,login:null,isAuth:!1,loginServerError:""},Oe=function(e,t,a){return{type:"SET-AUTH",email:e,id:t,login:a}},he=function(e){return{type:"SET-IS-AUTH",isAuth:e}},ve=function(e){return{type:"SET-LOGIN-SERVER-ERROR",error:e}},Se=function(){return function(e){return U().then((function(t){if(t.resultCode===n.Success){var a=t.data,r=a.email,c=a.id,i=a.login;e(Oe(r,c,i)),e(he(!0))}}))}},xe=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.authUser.isAuth})),a=Object(u.c)((function(e){return e.authUser.loginServerError})),r=Object(ae.a)({initialValues:{email:"",pass:""},validationSchema:ne.a({email:ne.b().email("Invalid email address").required("Required"),pass:ne.b().required("Required")}),onSubmit:function(t){e(function(e,t){return function(a){k(e,t,!1).then((function(e){e.resultCode===n.Success?(a(Se()),a(ve(""))):a(ve(e.messages))}))}}(t.email,t.pass,!1))}});return t?c.a.createElement(s.a,{to:"/profile"}):c.a.createElement("form",{onSubmit:r.handleSubmit},c.a.createElement(b.a,{sx:{width:"200px",padding:"30px",display:"grid",rowGap:"20px"}},c.a.createElement(X.a,{label:"Email",error:!!r.errors.email,value:r.values.email,onChange:r.handleChange,name:"email",variant:"outlined",size:"small",helperText:r.touched.email&&r.errors.email&&r.errors.email}),c.a.createElement(X.a,{label:"Pass",onChange:r.handleChange,name:"pass",variant:"outlined",size:"small",type:"password"}),c.a.createElement(E.a,{variant:"contained",type:"submit"},"login"),a&&c.a.createElement("div",null,a)))},je=a(75),we=a.n(je),Ce=a(374),Pe=a(375),Te=a(376),ye=a(165),Ne=a.n(ye),Ue=a(355),ke=a(356),Ie=a(357),Re=a(76),Le=a.n(Re),Ae=a(369),Fe=a(372),De=a(364),_e=a(373),ze=function(e){var t=e.isOpen,a=e.close;return c.a.createElement(Ae.a,{anchor:"left",open:t,onClose:a},c.a.createElement("div",{className:Le.a.links},c.a.createElement(Fe.a,{sx:{padding:"20px"},onClick:a},c.a.createElement(De.a,{sx:{mt:"40px"}},c.a.createElement(_e.a,null,c.a.createElement(Ue.a,null)),c.a.createElement(o.b,{to:"/profile",activeClassName:Le.a.activeLink},"Profile")),c.a.createElement(De.a,null,c.a.createElement(_e.a,null,c.a.createElement(ke.a,null)),c.a.createElement(o.b,{to:"/users",activeClassName:Le.a.activeLink},"Users")),c.a.createElement(De.a,null,c.a.createElement(_e.a,null,c.a.createElement(Ie.a,null)),c.a.createElement(o.b,{to:"/dialogs",activeClassName:Le.a.activeLink},"Dialogs")))))},Ge=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.authUser.login})),a=Object(r.useState)(!1),n=Object(D.a)(a,2),i=n[0],l=n[1];return c.a.createElement("header",{className:we.a.btn},c.a.createElement(Ce.a,null,c.a.createElement(Pe.a,null,c.a.createElement(ze,{isOpen:i,close:function(){l(!1)}}),c.a.createElement(Te.a,{size:"large",edge:"start",color:"inherit",onClick:function(){l(!0)}},c.a.createElement(Ne.a,{fontSize:"large"})),c.a.createElement(O.a,{variant:"h6",component:"span",sx:{flexGrow:1}},"WebSocial"),c.a.createElement(f.a,{container:!0,sx:{ml:"30px"}},c.a.createElement(Te.a,null,c.a.createElement(o.b,{to:"/profile",activeClassName:we.a.active},c.a.createElement(Ue.a,{fontSize:"large"}))),c.a.createElement(Te.a,null,c.a.createElement(o.b,{to:"/users",activeClassName:we.a.active},c.a.createElement(ke.a,{fontSize:"large"}))),c.a.createElement(Te.a,null,c.a.createElement(o.b,{to:"/dialogs",activeClassName:we.a.active},c.a.createElement(Ie.a,{fontSize:"large"})))),t?c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{variant:"h6",component:"span"},t),c.a.createElement(E.a,{variant:"contained",size:"small",onClick:function(){return e((function(e){I().then((function(t){e(Oe(null,null,null)),e(he(!1))}))}))},sx:{border:"1px solid white",color:"white"}},"Out")):c.a.createElement(o.b,{to:"/login"},c.a.createElement(E.a,{variant:"contained",sx:{border:"1px solid white",color:"white"}},"Login")))))},We={initialised:!1},Be=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.app.initialised}));return Object(r.useEffect)((function(){e((function(e){e(Se()).then(e({type:"IS-INITIALISED"}))}))}),[]),t?c.a.createElement(o.a,null,c.a.createElement(Ge,null),c.a.createElement(se.a,{sx:{mt:"5.5rem"}},c.a.createElement("main",null,c.a.createElement(s.b,{path:"/profile/:userId?",render:function(){return c.a.createElement(oe,null)}}),c.a.createElement(s.b,{path:"/dialogs",render:function(){return c.a.createElement(pe,null)}}),c.a.createElement(s.b,{path:"/users",render:function(){return c.a.createElement(W,null)}}),c.a.createElement(s.b,{path:"/login",render:function(){return c.a.createElement(xe,null)}})))):c.a.createElement(G,null)},Me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,379)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},He=a(167),Ve=a(166),qe=Object(ie.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS-INITIALISED":return Object(S.a)(Object(S.a)({},e),{},{initialised:!0});default:return e}},profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-NEW-POST":var a={id:Object(H.a)(),message:t.text,likeCount:0};return Object(S.a)(Object(S.a)({},e),{},{postsData:[].concat(Object(v.a)(e.postsData),[a])});case"SET-USER-TO-PROFILE-PAGE":return Object(S.a)(Object(S.a)({},e),{},{user:t.user});case"SET-USER-STATUS":return Object(S.a)(Object(S.a)({},e),{},{status:t.status});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-NEW-MESSAGE":var a={id:Object(H.a)(),message:t.text};return Object(S.a)(Object(S.a)({},e),{},{messages:[].concat(Object(v.a)(e.messages),[a])});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(S.a)(Object(S.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(S.a)(Object(S.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(S.a)(Object(S.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(S.a)(Object(S.a)({},e),{},{followed:!1}):e}))});case"SET-USERS":return Object(S.a)(Object(S.a)({},e),{},{users:t.users});case"SET-TOTAL-USERS-COUNT":return Object(S.a)(Object(S.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"SET-CURRENT-PAGE":return Object(S.a)(Object(S.a)({},e),{},{currentPage:t.currentPage});case"SET-IS-FETCHING":return Object(S.a)(Object(S.a)({},e),{},{isFetching:t.isFetching});case"SET-FOLLOW-PROGRESS-START":return Object(S.a)(Object(S.a)({},e),{},{followInProgress:[].concat(Object(v.a)(e.followInProgress),[t.id])});case"SET-FOLLOW-PROGRESS-END":return Object(S.a)(Object(S.a)({},e),{},{followInProgress:e.followInProgress.filter((function(e){return e!==t.id}))});default:return e}},authUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-AUTH":return Object(S.a)(Object(S.a)({},e),{},{email:t.email,login:t.login,id:t.id});case"SET-LOGIN-SERVER-ERROR":return Object(S.a)(Object(S.a)({},e),{},{loginServerError:t.error});case"SET-IS-AUTH":return Object(S.a)(Object(S.a)({},e),{},{isAuth:t.isAuth});default:return e}}}),Je=Object(ie.createStore)(qe,Object(Ve.composeWithDevTools)(Object(ie.applyMiddleware)(He.a)));window.store=Je;var Ye=Je;l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(u.a,{store:Ye},c.a.createElement(Be,null))),document.getElementById("root")),Me()},51:function(e,t,a){e.exports=a.p+"static/media/userDef.80d35342.png"},75:function(e,t,a){e.exports={btn:"Header_btn__3Y7It",active:"Header_active__2MpfG"}},76:function(e,t,a){e.exports={links:"SideNav_links__2sbXd",activeLink:"SideNav_activeLink__2nzJU"}}},[[178,1,2]]]);
//# sourceMappingURL=main.dea4d14d.chunk.js.map